<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="description" content="">
        <meta name="author" content="">

        <title>LOGIN</title>
        <link rel="icon" type="image/x-icon" href="https://img.icons8.com/officel/344/documentary.png">

        <!-- Bootstrap Core CSS -->
        <link href="css/bootstrap.min.css" rel="stylesheet" type="text/css">

        <!-- MetisMenu CSS -->
        <link href="css/metisMenu.min.css" rel="stylesheet" type="text/css">

        <!-- Custom CSS -->
        <link href="css/startmin.css" rel="stylesheet" type="text/css">

        <!-- Custom Fonts -->
        <link href="css/font-awesome.min.css" rel="stylesheet" type="text/css">

        <link href="//cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css" rel="stylesheet" type="text/css">

        <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
        <!--[if lt IE 9]>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->
    </head>
  <body style="display:none;">
    <style>
    body{
    	background-image: url("https://wallpaperaccess.com/full/329583.jpg");
      background-repeat: no-repeat;
  background-attachment: fixed;
  background-size: 100% 100%;

  /* background-size: contain; */
    }
  .panel-title{
        color: #ABEBC6;
        }
  .container{
    margin-left: 750px;

  }
  .p1{
  color: white;
  }
    .button {
    border: none;
    color: white;
    padding: 15px 32px;
    text-align: center;
    text-decoration: none;
    display: inline-block;
    font-size: 16px;
    margin: 4px 2px;
    cursor: pointer;
    background-color: #ff7675;
    margin-left: 850px;
    margin-left: 900px;
  }
  .form-group{
    margin-top: 25px;
  }
    </style>
        <div class="container">
            <div id="login-form-container" class="row">
                <div class="col-md-4 col-md-offset-4">
                    <div class="login-panel panel panel-default">
                        <div class="panel-heading">
                            <h3 class="panel-title">Please Sign In</h3>
                        </div>
                        <div class="panel-body">
                            <form role="form">
                                <fieldset>
                                    <div class="form-group">
                                        <input id="email" class="form-control" placeholder="E-mail" name="email" type="email" autofocus>
                                    </div>

                                    <div class="form-group">
                                        <input id="password" class="form-control" placeholder="Password" name="password" type="password" value="" >
                                    </div>

                                    <!-- Change this to a button or input when using this as a form -->
                                    <br></br>
                                    <a id="register" onclick="doLogin();" class="btn btn-lg btn-success btn-block">Login</a>
                                    <a id="register-link" onclick="showRegisterForm();" class="btn btn-lg btn-success btn-block">Register here</a>
                                </fieldset>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
            <div id="register-form-alert" class="row d-none" style="margin-right: 800px; margin-top: 100px">
          <div class="alert alert-success" role="alert">
            confirm your email and then log in!
          </div>
        </div>
        </div>
        <div class="container">
            <div id="register-form-container" class="row d-none">
                <div class="col-md-4 col-md-offset-4">
                    <div class="login-panel panel panel-default">
                        <div class="panel-heading">
                            <h3 class="panel-title">Register Form</h3>
                        </div>
                        <div class="panel-body">
                            <form id="register-form" role="form">
                                <fieldset>
                                  <div class="form-group">
                                      <input id="register-name" class="form-control" placeholder="Name" name="email" type="text" required>
                                  </div>
                                  <div class="form-group">
                                      <input id="register-surname" class="form-control" placeholder="Surname" name="surname" type="text" required>
                                  </div>
                                  <div class="form-group">
                                      <input id="register-username" class="form-control" placeholder="Username" name="username" type="text" required>
                                  </div>
                                    <div class="form-group">
                                        <input id="register-email" class="form-control" placeholder="Valid e-mail" name="email" type="text" required>
                                    </div>
                                    <div class="form-group">
                                        <input id="register-password" class="form-control" placeholder="Password" name="password" type="password" required>
                                    </div>
                                    <br></br>
                                    <a id="register" onclick="doRegister();" class="btn btn-lg btn-success btn-block">Register</a>
                                    <a id="register-link" onclick="showLoginForm();" class="btn btn-lg btn-success btn-block">Login here</a>
                                </fieldset>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <button class="button" onclick="homepage()">homepage</button>

        <script src="js/jquery-3.6.0.min.js"></script>
    		<script src="js/bootstrap.bundle.min.js"></script>
        <script src="//cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>


        <script type="text/javascript">
        $(function(){
           if (window.localStorage.getItem("token")){
             window.location="index.html";
           }else{
             $('body').show();
           }
         });
         function showRegisterForm(){
           $("#login-form-container").addClass("d-none");
           $("#register-form-container").removeClass("d-none");
          }
          function showLoginForm(){
            $("#login-form-container").removeClass("d-none");
            $("#register-form-container").addClass("d-none");
           }

    function doRegister(){
        var register_info = {
        "name" : $("#register-name").val(),
        "surname" : $("#register-surname").val(),
        "username" : $("#register-username").val(),
        "email" : $("#register-email").val(),
        "password" : $("#register-password").val()
        };
     $("#register-link").prop('disabled',true);
      $.post( "rest/register", register_info).done(function( data ) {
        console.log(data);
        // $("#register-form-container").addClass("d-none");
        // $("#register-form-alert").removeClass("d-none");
        // $("#register-form-alert .alert").html(data.message);
        alert("success, confirm email and than login!")
      }).fail(function(error) {
      $("#register-link").prop('disabled',false);
      console.log(error);
    alert("Please fill out form with Your valid data!");
    });
         }

        function doLogin() {
        var login_info = {
     "email" : $("#email").val(),
     "password" : $("#password").val()
   };
  $("#login-link").prop('disabled',true);
   $.post( "rest/login", login_info).done(function( data ) {
     window.localStorage.setItem("token", data.token);

    window.location = "index.html";
   }).fail(function(error) {
   $("#login-link").prop('disabled',false);
 alert("invalid email or password");
 });
      }
      function homepage(){
        window.location = "homepage.html";
      }
               </script>

    </body>
</html>
